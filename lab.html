<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>מעבדת הניסויים - ChemXploder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#4F46E5",
            secondary: "#10B981",
            darkBg: "#1F2937",
            lightBg: "#F3F4F6",
          },
          fontFamily: {
            pacifico: ['"Pacifico"', "cursive"],
            heebo: ["Heebo", "sans-serif"],
          },
          borderRadius: {
            DEFAULT: "8px",
            button: "8px"
          },
          animation: {
            fadeIn: "fadeIn 0.5s ease-out",
          },
          keyframes: {
            fadeIn: {
              "0%": { opacity: "0" },
              "100%": { opacity: "1" },
            },
          },
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
  <style>
    body { 
      font-family: 'Heebo', sans-serif; 
      background: linear-gradient(135deg, #F3F4F6, #E5E7EB); 
    }
    .beaker-highlight {
      border-color: #4F46E5 !important;
      background-color: rgba(79,70,229,0.1);
    }
    .chemical-drop {
      animation: drop 0.5s ease-in forwards;
      position: absolute;
      font-size: 24px;
    }
    @keyframes drop {
      0% { transform: translateY(-20px); opacity: 1; }
      100% { transform: translateY(20px); opacity: 0; }
    }
  </style>
</head>
<body class="bg-lightBg">

  <!-- סרגל עליון עם גוונים (גרדיאנט) וחזרה למשחקים, ללא ניקוד -->
  <nav class="shadow-sm" style="background: linear-gradient(90deg, #4F46E5, #10B981);">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex justify-between h-16 items-center">
        <!-- חזרה למשחקים -->
        <div class="flex items-center gap-4">
          <a href="index.html" class="flex items-center gap-2 hover:underline text-white">
            <i class="ri-arrow-right-line"></i>
            <span>חזרה למשחקים</span>
          </a>
        </div>
        <!-- שם המשחק -->
        <div class="text-2xl font-pacifico text-white">
          ChemXploder
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto p-4">
    <div class="bg-white rounded-lg shadow-lg p-6 mt-8">
      <h2 class="text-2xl font-bold mb-4">גרור חומרים למבחנה</h2>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <!-- 13 חומרים -->
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="sodium">
          <i class="ri-test-tube-line text-primary"></i> נתרן (Na)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="water">
          <i class="ri-drop-line text-blue-500"></i> מים (H₂O)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="acid">
          <i class="ri-test-tube-line text-red-500"></i> חומצה (HCl)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="base">
          <i class="ri-test-tube-line text-purple-500"></i> בסיס (NaOH)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="potassium">
          <i class="ri-test-tube-line text-orange-500"></i> אשלגן (K)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="calcium">
          <i class="ri-test-tube-line text-green-600"></i> סידן (Ca)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="magnesium">
          <i class="ri-test-tube-line text-purple-600"></i> מגנזיום (Mg)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="sulfuric">
          <i class="ri-test-tube-line text-red-600"></i> חומצה גופריתית (H₂SO₄)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="ammonia">
          <i class="ri-test-tube-line text-yellow-600"></i> אמוניה (NH₃)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="ethanol">
          <i class="ri-test-tube-line text-pink-600"></i> אתנול (C₂H₅OH)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="bromine">
          <i class="ri-test-tube-line text-indigo-600"></i> ברום (Br₂)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="copper">
          <i class="ri-test-tube-line text-blue-600"></i> נחושת (Cu)
        </div>
        <div class="chemical-item bg-white p-2 rounded cursor-pointer hover:bg-gray-50" draggable="true" data-chemical="silver">
          <i class="ri-test-tube-line text-gray-600"></i> כסף (Ag)
        </div>
      </div>

      <div id="experimentArea" class="bg-gray-100 p-4 rounded-lg">
        <h4 class="font-semibold mb-2">אזור הניסוי:</h4>
        <div id="beaker" class="h-40 bg-white rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center">
          <p class="text-gray-400">גרור חומרים לכאן</p>
        </div>
        <div class="mt-4 flex justify-end">
          <button onclick="clearExperiment()" class="rounded-button bg-gray-200 text-gray-700 px-4 py-2 mr-2">נקה</button>
          <button onclick="runExperiment()" class="rounded-button bg-primary text-white px-4 py-2">הפעל ניסוי</button>
        </div>
      </div>

      <div id="reactionResult" class="hidden bg-gray-100 p-4 rounded-lg mt-4">
        <h4 class="font-semibold mb-2">תוצאת התגובה:</h4>
        <div id="reactionAnimation" class="h-40 bg-white rounded-lg flex items-center justify-center"></div>
      </div>
    </div>
  </main>

  <script>
    let activeChemicals = [];

    function initLabDragDrop() {
      document.querySelectorAll('.chemical-item').forEach(item => {
        item.addEventListener('dragstart', (e) => {
          e.dataTransfer.setData('text/plain', e.target.dataset.chemical);
          e.target.classList.add('dragging');
        });
        item.addEventListener('dragend', (e) => {
          e.target.classList.remove('dragging');
        });
      });

      const beaker = document.getElementById('beaker');
      beaker.addEventListener('dragover', (e) => {
        e.preventDefault();
        beaker.classList.add('beaker-highlight');
      });
      beaker.addEventListener('dragleave', (e) => {
        beaker.classList.remove('beaker-highlight');
      });
      beaker.addEventListener('drop', (e) => {
        e.preventDefault();
        beaker.classList.remove('beaker-highlight');
        const chem = e.dataTransfer.getData('text/plain');
        if (!activeChemicals.includes(chem)) {
          activeChemicals.push(chem);
          updateBeakerDisplay();
        }
      });
    }

    function updateBeakerDisplay() {
      const beaker = document.getElementById('beaker');
      const icons = {
        sodium: '<i class="ri-test-tube-line text-primary text-2xl"></i>',
        water: '<i class="ri-drop-line text-blue-500 text-2xl"></i>',
        acid: '<i class="ri-test-tube-line text-red-500 text-2xl"></i>',
        base: '<i class="ri-test-tube-line text-purple-500 text-2xl"></i>',
        potassium: '<i class="ri-test-tube-line text-orange-500 text-2xl"></i>',
        calcium: '<i class="ri-test-tube-line text-green-600 text-2xl"></i>',
        magnesium: '<i class="ri-test-tube-line text-purple-600 text-2xl"></i>',
        sulfuric: '<i class="ri-test-tube-line text-red-600 text-2xl"></i>',
        ammonia: '<i class="ri-test-tube-line text-yellow-600 text-2xl"></i>',
        ethanol: '<i class="ri-test-tube-line text-pink-600 text-2xl"></i>',
        bromine: '<i class="ri-test-tube-line text-indigo-600 text-2xl"></i>',
        copper: '<i class="ri-test-tube-line text-blue-600 text-2xl"></i>',
        silver: '<i class="ri-test-tube-line text-gray-600 text-2xl"></i>'
      };
      beaker.innerHTML = activeChemicals.map(c => `<div class="m-2">${icons[c] || c}</div>`).join('');
    }

    function clearExperiment() {
      activeChemicals = [];
      document.getElementById('beaker').innerHTML = '<p class="text-gray-400">גרור חומרים לכאן</p>';
      document.getElementById('reactionResult').classList.add('hidden');
    }

    function runExperiment() {
      const reactionResult = document.getElementById('reactionResult');
      const reactionAnimation = document.getElementById('reactionAnimation');
      reactionResult.classList.remove('hidden');

      let found = false;
      for (let scenario of labScenarios) {
        // בודקים אם אורך המערך זהה (2 חומרים בדיוק)
        // ואם כל החומרים בסצנריו מופיעים ב-activeChemicals
        if (scenario.chemicals.length === activeChemicals.length 
            && scenario.chemicals.every(c => activeChemicals.includes(c))) {
          const msg = scenario.messages[Math.floor(Math.random() * scenario.messages.length)];
          reactionAnimation.innerHTML = `<div class="text-center px-2">${msg}</div>`;
          found = true;
          break;
        }
      }
      if (!found) {
        const noReactions = [
          "🤷 אין תגובה – נסה שילוב אחר.",
          "😕 לא קורה כלום, אולי תנסה שוב עם חומרים אחרים?",
          "🤔 כלום, אין תגובה, תבדוק שוב את החומרים.",
          "🙄 אין תגובה, נסה להוסיף עוד חומרים.",
          "😐 נראה ששום דבר לא קורה, נסה שוב."
        ];
        reactionAnimation.innerHTML = `<div class="text-center px-2"><p class="text-xl font-bold text-gray-500">${noReactions[Math.floor(Math.random()*noReactions.length)]}</p></div>`;
      }
    }

    // כל הצירופים האפשריים של 2 חומרים מתוך ה-13, עם הודעה משעשעת (או מפחידה)
    const labScenarios = [
      { chemicals: ['sodium','water'], messages: ["💥 נתרן במים - פיצוץ מוכר וחביב!"]},
      { chemicals: ['sodium','acid'], messages: ["⚡ נתרן וחומצה - כדאי להתרחק מהר!"]},
      { chemicals: ['sodium','base'], messages: ["🔮 נתרן ובסיס - מפגש לוהט, זהירות."]},
      { chemicals: ['sodium','potassium'], messages: ["🌀 שני מתכות אלקליות - מסוכן ברמות!"]},
      { chemicals: ['sodium','calcium'], messages: ["🪨 נתרן וסידן - לא כיף, אבל מגניב."]},
      { chemicals: ['sodium','magnesium'], messages: ["🌟 נתרן ומגנזיום - ניצוצות בכל מקום!"]},
      { chemicals: ['sodium','sulfuric'], messages: ["🔥 נתרן וחומצה גופריתית - שמישהו יקרא למכבי אש."]},
      { chemicals: ['sodium','ammonia'], messages: ["😵 נתרן ואמוניה - לא תאמין כמה זה מסריח."]},
      { chemicals: ['sodium','ethanol'], messages: ["🍸 נתרן ואתנול - אל תשתה את זה!"]},
      { chemicals: ['sodium','bromine'], messages: ["💣 נתרן וברום - תגובה נפיצה ומסריחה."]},
      { chemicals: ['sodium','copper'], messages: ["🔧 נתרן ונחושת - לא סתם משחת שיניים."]},
      { chemicals: ['sodium','silver'], messages: ["💎 נתרן וכסף - נוצץ אבל מסוכן."]},
      { chemicals: ['water','acid'], messages: ["💧 מים וחומצה - דלל את זה בזהירות!"]},
      { chemicals: ['water','base'], messages: ["🧪 מים ובסיס - נייטרול קטן, או סתם דילול."]},
      { chemicals: ['water','potassium'], messages: ["💥 מים ואשלגן - פיצוץ גדול יותר מאשר נתרן!"]},
      { chemicals: ['water','calcium'], messages: ["🍼 מים וסידן - אולי זה נהיה חלב?"]},
      { chemicals: ['water','magnesium'], messages: ["⚙️ מים ומגנזיום - בועות קטנות וחלשות."]},
      { chemicals: ['water','sulfuric'], messages: ["🚿 מים וחומצה גופריתית - מוסיפים אותה למים, לא להפך!"]},
      { chemicals: ['water','ammonia'], messages: ["💨 מים ואמוניה - ריח עוצמתי, זהירות בעיניים."]},
      { chemicals: ['water','ethanol'], messages: ["🍹 מים ואתנול - תמהיל בסיסי לאלכוהול."]},
      { chemicals: ['water','bromine'], messages: ["🩸 מים וברום - הופך לאדום-חום מפחיד."]},
      { chemicals: ['water','copper'], messages: ["🔑 מים ונחושת - ירוקת כזאת, אולי פסל החירות?"]},
      { chemicals: ['water','silver'], messages: ["💧 מים וכסף - נשמע טהור, אבל לא באמת."]},
      { chemicals: ['acid','base'], messages: ["🧪 נטרול מושלם: יוצא מלח ומים."]},
      { chemicals: ['acid','potassium'], messages: ["💥 חומצה ואשלגן - פיצוץ חריף, חם יותר מחריף סודני."]},
      { chemicals: ['acid','calcium'], messages: ["⚗️ חומצה וסידן - תסיסה מגניבה, זהירות בעיניים."]},
      { chemicals: ['acid','magnesium'], messages: ["🔬 חומצה ומגנזיום - בועות מימן והרבה גז."]},
      { chemicals: ['acid','sulfuric'], messages: ["🧨 חומצה על חומצה - מסוכן ומאכל."]},
      { chemicals: ['acid','ammonia'], messages: ["🌫️ חומצה ואמוניה - עשן מסריח בכל הבית."]},
      { chemicals: ['acid','ethanol'], messages: ["🍷 אסתר פוטנציאלי, ריחני אבל אל תטעם."]},
      { chemicals: ['acid','bromine'], messages: ["🌋 חומצה וברום - תערובת געשית ומסוכנת."]},
      { chemicals: ['acid','copper'], messages: ["💥 חומצה ונחושת - נוצרת תגובה כחולה-ירוקה."]},
      { chemicals: ['acid','silver'], messages: ["⚠️ חומצה וכסף - החומצה יכולה להמיס את הכסף."]},
      { chemicals: ['base','potassium'], messages: ["🌀 בסיס ואשלגן - יותר מדי בסיס, יותר מדי מתכת."]},
      { chemicals: ['base','calcium'], messages: ["🦴 בסיס וסידן - לא תהפוך לעצמות פלדה."]},
      { chemicals: ['base','magnesium'], messages: ["⚙️ בסיס ומגנזיום - קורוזיה ושחרור מימן."]},
      { chemicals: ['base','sulfuric'], messages: ["💢 בסיס וחומצה גופריתית - נטרול עוצמתי, זהירות!"]},
      { chemicals: ['base','ammonia'], messages: ["💨 בסיס ואמוניה - ריח חריף, חנקני כזה."]},
      { chemicals: ['base','ethanol'], messages: ["🍹 בסיס ואתנול - לא קוקטייל לשתות."]},
      { chemicals: ['base','bromine'], messages: ["🌪️ בסיס וברום - תגובה מורכבת ולא נעימה."]},
      { chemicals: ['base','copper'], messages: ["🔑 בסיס ונחושת - מי אמר פסל החירות 2?"]},
      { chemicals: ['base','silver'], messages: ["💀 בסיס וכסף - היזהר, אולי זה יחסל יצורים מיקרוסקופיים?"]},
      { chemicals: ['potassium','calcium'], messages: ["🔥 אשלגן וסידן - שתי מתכות ריאקטיביות, מסוכן!"]},
      { chemicals: ['potassium','magnesium'], messages: ["⚡ אשלגן ומגנזיום - ניצוצות ובומים."]},
      { chemicals: ['potassium','sulfuric'], messages: ["💥 אשלגן וחומצה גופריתית - פיצוץ מטורף, אל תנסה בבית."]},
      { chemicals: ['potassium','ammonia'], messages: ["😷 אשלגן ואמוניה - ריח מסריח וחזק."]},
      { chemicals: ['potassium','ethanol'], messages: ["🍸 אשלגן ואתנול - תגובה בסיסית, לא שותה!"]},
      { chemicals: ['potassium','bromine'], messages: ["🔴 אשלגן וברום - להבה סגולה ואדים אדומים."]},
      { chemicals: ['potassium','copper'], messages: ["🔧 אשלגן ונחושת - לא להכניס לשקע חשמלי!"]},
      { chemicals: ['potassium','silver'], messages: ["💎 אשלגן וכסף - נוצץ, אבל מסוכן ברמות."]},
      { chemicals: ['calcium','magnesium'], messages: ["⚙️ סידן ומגנזיום - מתכות קלות, תוצאה משונה."]},
      { chemicals: ['calcium','sulfuric'], messages: ["🍼 סידן וחומצה גופריתית - גבס? תערובת לא נעימה."]},
      { chemicals: ['calcium','ammonia'], messages: ["🦴 סידן ואמוניה - ריח חלב מקולקל..."]},
      { chemicals: ['calcium','ethanol'], messages: ["🍶 סידן ואתנול - לא משקה אנרגיה, מסוכן."]},
      { chemicals: ['calcium','bromine'], messages: ["🌋 סידן וברום - עשן כבד, לא תענוג."]},
      { chemicals: ['calcium','copper'], messages: ["🔩 סידן ונחושת - לא יצא מזה מטבע, אל תנסה."]},
      { chemicals: ['calcium','silver'], messages: ["💀 סידן וכסף - אולי תוצאה כימית לא יציבה."]},
      { chemicals: ['magnesium','sulfuric'], messages: ["💨 מגנזיום וחומצה גופריתית - מימן חופשי והרבה חום."]},
      { chemicals: ['magnesium','ammonia'], messages: ["⚗️ מגנזיום ואמוניה - לא יציב, עלול ליצור חומרי נפץ."]},
      { chemicals: ['magnesium','ethanol'], messages: ["🔥 מגנזיום ואתנול - להבה לבנה, מרהיבה אך מסוכנת."]},
      { chemicals: ['magnesium','bromine'], messages: ["💥 מגנזיום וברום - תגובה חזקה עם להבות."]},
      { chemicals: ['magnesium','copper'], messages: ["🔧 מגנזיום ונחושת - לא מתאחדים בקלות, אבל כיף לצפות."]},
      { chemicals: ['magnesium','silver'], messages: ["💎 מגנזיום וכסף - אולי תופיע תגובה זוהרת?"]},
      { chemicals: ['sulfuric','ammonia'], messages: ["🌫️ חומצה גופריתית ואמוניה - עשן סמיך ומסריח."]},
      { chemicals: ['sulfuric','ethanol'], messages: ["🍸 חומצה גופריתית ואתנול - אפשר ליצור אתר (Ether), מסוכן!"]},
      { chemicals: ['sulfuric','bromine'], messages: ["☢️ חומצה גופריתית וברום - אדי גופרית וברום, לא בריא לנשום."]},
      { chemicals: ['sulfuric','copper'], messages: ["🧪 חומצה גופריתית ונחושת - תמיסה כחולה (CuSO₄) תופיע."]},
      { chemicals: ['sulfuric','silver'], messages: ["⚠️ חומצה גופריתית וכסף - מפרק את הכסף די מהר."]},
      { chemicals: ['ammonia','ethanol'], messages: ["🍶 אמוניה ואתנול - ריח מוזר, לא לשתייה!"]},
      { chemicals: ['ammonia','bromine'], messages: ["🌋 אמוניה וברום - תגובה מסוכנת, יכולה להפיק עשן רעיל."]},
      { chemicals: ['ammonia','copper'], messages: ["🧼 אמוניה ונחושת - מנקה כתמים, אבל אל תגזים."]},
      { chemicals: ['ammonia','silver'], messages: ["🔮 אמוניה וכסף - סילבר-אמוניה מורכב, עלול להיות נפיץ."]},
      { chemicals: ['ethanol','bromine'], messages: ["🍹 אתנול וברום - ברומואתנול, לא טעים."]},
      { chemicals: ['ethanol','copper'], messages: ["🍸 אתנול ונחושת - חלק מתהליך זיקוק, לא לערבב בבית סתם."]},
      { chemicals: ['ethanol','silver'], messages: ["💧 אתנול וכסף - חיטוי? יש שיטות טובות יותר..."]},
      { chemicals: ['bromine','copper'], messages: ["🔴 ברום ונחושת - נוצרת תגובה ירקרקה-חומה, מגעילה למדי."]},
      { chemicals: ['bromine','silver'], messages: ["⚡ ברום וכסף - ככה עושים הליד של כסף, רגיש לאור."]},
      { chemicals: ['copper','silver'], messages: ["💎 נחושת וכסף - סגסוגת? אולי תכשיט, אבל זהירות."]}
    ];

    document.addEventListener('DOMContentLoaded', initLabDragDrop);
  </script>
</body>
</html>
